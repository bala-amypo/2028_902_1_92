
User.java model

package com.example.Hotspot.model;

import jakarta.persistence.*;
import java.time.LocalDateTime;

@Entity
@Table(name = "users")
public class User {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;

private String name;

@Column(unique = true, nullable = false)
private String email;

@Column(nullable = false)
private String password;

// values: ADMIN / ANALYST, default ANALYST
@Column(nullable = false)
private String role;

private LocalDateTime createdAt;

public User() {
}

public User(Long id, String name, String email, String password, String role, LocalDateTime createdAt) {
this.id = id;
this.name = name;
this.email = email;
this.password = password;
this.role = role;
this.createdAt = createdAt;
}

@PrePersist
public void prePersist() {
if (createdAt == null) {
createdAt = LocalDateTime.now();
}
if (role == null) {
role = "ANALYST";
}
}

public Long getId() {
return id;
}

public void setId(Long id) {
this.id = id;
}

public String getName() {
return name;
}

public void setName(String name) {
this.name = name;
}

public String getEmail() {
return email;
}

public void setEmail(String email) {
this.email = email;
}

public String getPassword() {
return password;
}

public void setPassword(String password) {
this.password = password;
}

public String getRole() {
return role;
}

public void setRole(String role) {
this.role = role;
}

public LocalDateTime getCreatedAt() {
return createdAt;
}

public void setCreatedAt(LocalDateTime createdAt) {
this.createdAt = createdAt;
}

@Override
public String toString() {
return "User{" +
"id=" + id +
", name='" + name + '\'' +
", email='" + email + '\'' +
", role='" + role + '\'' +
", createdAt=" + createdAt +
'}';
}
}



UserRepository.java

package com.example.Hotspot.repository;

import com.example.Hotspot.model.User;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface UserRepository extends JpaRepository<User, Long> {

Optional<User> findByEmail(String email);
}

SERVICE FOLDER


AuthService.java


package com.example.demo.service;

import com.example.demo.model.User;

public interface AuthService {

User register(User user);

String login(String email, String rawPassword);
}


CrimeReportService.java



demoAoneService.java


PatternDetectionService.java


UserService.java




ServiceImplemnt

AnalysisLogServiceImpl.java





AuthServiceImpl.java


package com.example.demo.service.Implement;

import com.example.demo.model.User;
import com.example.demo.repository.UserRepository;
import com.example.demo.service.AuthService;
import com.example.demo.service.UserService;
import org.springframework.stereotype.Service;

@Service
public class AuthServiceImpl implements AuthService, UserService {

private final UserRepository userRepository;

public AuthServiceImpl(UserRepository userRepository) {
this.userRepository = userRepository;
}

@Override
public User register(User user) {
// store raw password directly (no encoding)
return userRepository.save(user);
}

@Override
public String login(String email, String rawPassword) {
User user = findByEmail(email);
if (!rawPassword.equals(user.getPassword())) {
throw new RuntimeException("Invalid credentials");
}
// simple placeholder token / message
return "LOGIN_SUCCESS_FOR_USER_" + user.getId();
}

@Override
public User findByEmail(String email) {
return userRepository.findByEmail(email)
.orElseThrow(() -> new RuntimeException("User not found"));
}
}



CrimeReportServiceImpl.java


demoZoneServiceImpl.java



PatternDetectionServiceImpl.java




REPOSITORY FOLDEER


AnalysisLogRepository.java


CrimeReportRepository.java



demoZoneRepository.java





PatternDetectionResultRepository.java


UserRepository.java


EXCEPTION FOLDER



ResourceNotFoundException.java
